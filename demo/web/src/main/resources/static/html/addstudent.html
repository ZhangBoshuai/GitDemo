<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加学生</title>
    <!--jquery-->
    <script src="../js/jquery-3.3.1.min.js"></script>
    <!--获取form表单-->
    <script src="../js/form2json.js"></script>
    <!--图片上传回显-->
    <script src="../js/imgEcho.js"></script>
    <script>

        $(function () {
            $.ajax({
                url:'/student/getMar',
                type:'get',
                dataType:'json',
                success:function (data) {
                    $(data).each(function (index, ele) {
                        $("#majorSeId").append("<option value='"+ele.majorId+"'>"+ele.majorName+"</option>")
                    })
                },
                error:function () {
                    alert("出现错误")
                }
            })
        })


        function mySubmit() {
           var stuForm=$("#addForm").formToJson()
            $.ajax({
                url:'/student/addStu',
                data:stuForm,
                type:'POST',
                dataType:'json',
                statusCode:{
                    201:function () {
                        location.href="/html/studentlist.html"
                    },
                    500:function () {
                        $("#msgId").html("<font color='red'>用户名不可用</font>")
                    }
                }

            })
        }

    </script>

</head>
<body>
<h1>添加学生</h1>
<form id="addForm">
    <span id="msgId"></span> <br>
    学生姓名:<input type="text" id="studentName" name="studentName" placeholder="请输入"><br>
    <input type="radio" id="man" name="studentSex" value="男">男<input type="radio" id="woman" name="studentSex" value="女">女<br>
    联系方式<input type="text" name="studentPhone" id="phone"> 出生日期:<input type="text" id="datetime" name="studentBirthday"><br>
    电子邮箱:<input type="text" name="studentEmail" id="email"><br>
    所属学年:<input type="text" name="studentYear" id="year"><br>
    所属学期:<input type="text" name="studentSemester" id="semester"><br>
    所属专业:<select name="majorId" id="majorSeId">
        <!--<option value="1">计算器</option>-->
        <!--<option value="2">大数据</option>-->
    </select>
    <br>
    学生描述:<textarea id="rearmk" name="studentDescribe" placeholder="请输入内容"></textarea><br>
    <input type="button" id="add" onclick="mySubmit()" value="添加"> <input type="reset" name="button" id="caln" value="重置" />

</form>
</body>
</html>